<template name="gamePlayers">

<!-- Page Content -->
    <div class="container-fluid display-none animate-fade-in content-split-vertically">
        <div class="col col-8 s12 center-align vertical-align border-bottom-game">
            <div class="clearfix vertical-align-child bg-game-header">
                <h1 class="m0 tx-uppercase tx-lg">Mafia in {{ stringCrop game.city.name 12 }}</h1>
            </div>
        </div>

        <div class="col col-24 s12 center-align vertical-align-child">
            <div class="clearfix vertical-align-child">
                {{# if not started }}
                    {{# if equalTo game.players.joined game.players.expected }}
                        <p class="tx-md p10">All players joined! Click on START to begin the game.</p>
                    {{ else }}
                        <p class="tx-lg mt5 mb5">Code: {{ game.city.code }}</p>
                        <p class="center-align mt5 mb5">{{> commonLoadingAction active="active" }}</p>
                        <p class="center-align mt5 mb5">waiting for players...</p>
                    {{/ if }}
                {{ else }}
                    <button class="btn waves-effect waves-light red accent-2 mr10" id="game-started">Play <i class="material-icons left">navigate_next</i></button>
                {{/ if }}
            </div>
        </div>

        <div class="col col-10 s12 center-align vertical-align">
            <div class="clearfix vertical-align-child">
                <div class="divider divider-game"></div>

                <p class="tx-lg center-align mt10 mb5">Players joined: {{ game.players.joined }}/{{ game.players.expected }}</p>
            </div>
        </div>

        <div class="col col-50 s12">
            <ul class="collection m0">
                {{# each arrayReverse game.players.list }}
                    <li class="collection-item avatar">
                        <img src="{{ image }}" alt="{{ name }}" class="circle">
                        <span class="title">{{ name }}</span>

                        {{# if equalTo id currentUser._id }}
                            <p class="grey-text">
                                {{# if ready }}
                                    Ready
                                {{ else }}
                                    Not ready
                                {{/ if }}
                            </p>
                            <div class="secondary-content">
                                <div class="switch">
                                    <label>
                                        {{# if ready }}
                                            <input type="checkbox" id="game-ready" checked="checked" />
                                        {{ else }}
                                            <input type="checkbox" id="game-ready"/>
                                        {{/ if }}
                                        <span class="lever m0"></span>
                                    </label>
                                </div>
                            </div>
                        {{ else }}
                            {{# if ready }}
                                <p class="grey-text">Ready</p>
                                <a href="#" class="secondary-content"><i class="material-icons">done</i></a>
                            {{ else }}
                                <p class="grey-text">Not ready</p>
                                <a href="#" class="secondary-content"><i class="material-icons">timer</i></a>
                            {{/ if }}
                        {{/ if }}
                    </li>
                {{/ each }}
            </ul>
        </div>

        <div class="col col-8 s12 center-align vertical-align">
            <div class="clearfix vertical-align-child">
                {{# if canInvite }}
                    <button class="btn waves-effect waves-light red accent-2 mr10" id="game-invite"><i class="material-icons left">group_add</i> Invite</button>
                {{/ if }}

                {{# if canStart }}
                    <button class="btn waves-effect waves-light" id="game-start">Start <i class="material-icons right">navigate_next</i></button>
                {{ else }}
                    <button class="btn waves-effect waves-light" disabled="disabled">Start <i class="material-icons right">navigate_next</i></button>
                {{/ if }}
            </div>
        </div>
    </div>

</template>